// Code generated by generator, DO NOT EDIT.
package generated

import (
	"context"
	"github.com/jackc/pgx/v5/pgxpool"
	types "github.com/leemartin77/mincepierank.co.uk/internal/storage/types"
)

// Insert new 'MakerPieYearly' into table 'maker_pie_yearly' - duplicate ids is a no-op
func MakerPieYearlyCreate(ctx context.Context, pg *pgxpool.Pool, c types.MakerPieYearly) (*types.MakerPieYearly, error) {
	args := []interface{}{
		c.Year,
		c.MakerId,
		c.Id,
		c.DisplayName,
		c.Fresh,
		c.Labels,
		c.ImageFile,
		c.WebLink,
		c.PackCount,
		c.PackPriceInPence,
	}
	sql := "INSERT INTO maker_pie_yearly (year,makerid,id,displayname,fresh,labels,image_file,web_link,pack_count,pack_price_in_pence) VALUES (?,?,?,?,?,?,?,?,?,?) ON CONFLICT DO NOTHING"
	_, err := pg.Exec(ctx, sql, args...)
	if err != nil {
		return nil, err
	}
	return &c, nil
}

// Update 'MakerPieYearly' in table 'maker_pie_yearly' based on id columns
func MakerPieYearlyUpdate(ctx context.Context, pg *pgxpool.Pool, u types.MakerPieYearly) (*types.MakerPieYearly, error) {
	sets := []interface{}{}
	identifiers := []interface{}{}
	identifiers = append(identifiers, u.Year)
	identifiers = append(identifiers, u.MakerId)
	identifiers = append(identifiers, u.Id)
	sets = append(sets, u.DisplayName)
	sets = append(sets, u.Fresh)
	sets = append(sets, u.Labels)
	sets = append(sets, u.ImageFile)
	sets = append(sets, u.WebLink)
	sets = append(sets, u.PackCount)
	sets = append(sets, u.PackPriceInPence)
	sql := "UPDATE maker_pie_yearly SET displayname=?,fresh=?,labels=?,image_file=?,web_link=?,pack_count=?,pack_price_in_pence=? WHERE year=?,makerid=?,id=?"
	args := append(sets, identifiers...)
	_, err := pg.Exec(ctx, sql, args...)
	if err != nil {
		return nil, err
	}
	return &u, nil
}
